---
import Heading from "@/components/Hero/Heading.astro";
import Badge from "@/components/Products/Badge.astro";
import Bar from "@/components/Products/Bar.astro";
import rawProducts from "@/components/Products/product.json" assert { type: "json" };
import type { ProductType } from "@/components/Products/types";
import RandomImage from "@/components/RandomImage.astro";
import Dialog from "@/components/Tarif/Dialog.astro";
import HeaderFooter from "@/layouts/HeaderFooter.astro";
import Section from "@/layouts/Section.astro";
import { generateLorem } from "@/lib/utils";
import { ArrowDown, Backpack, Gauge, MapPin } from "lucide-react";
import Layout from "../layouts/Layout.astro";

const products = rawProducts.products as ProductType[];
---

<style>
  .debug-1 {
    @apply ring-1 ring-red-400;
  }
  .debug-2 {
    @apply ring-1 ring-green-400;
  }
  .debug-3 {
    @apply ring-1 ring-blue-400;
  }
  .debug-4 {
    @apply ring-1 ring-yellow-400;
  }
  .debug-5 {
    @apply ring-1 ring-purple-400;
  }
  .debug-6 {
    @apply ring-1 ring-pink-400;
  }
</style>

<Layout title="tarif">
  <HeaderFooter slot="header" />
  <Section>
    <Heading h2="Nos tarifs" h3="Composable et personalisable" className="text-black">
      <div class="grow max-h-[10%]"></div>
      <a href="#1" class="pointer-events-auto">
        <ArrowDown size="32" />
      </a>
    </Heading>
  </Section>
  <Section id={"1"} className={"vertical center container gap-32"}>
    {
      products.map((product, i) => {
        const isEven = i % 2 === 0;
        return (
          <div class={`full ${isEven ? "horizontal" : "horizontal-reverse"} px-5 gap-10 center`}>
            <section class=" relative vertical w-fit h-full">
              <RandomImage seed={600} className="h-[500px] w-full aspect-square" />
              <div
                class={`absolute bottom-5 ${isEven ? "left-5" : "right-5"} horizontal w-full ${isEven ? "justify-start" : "justify-end"} gap-5 items-center`}>
                <RandomImage size={110} className="ring-1 ring-white" />
                <RandomImage size={110} className="ring-1 ring-white" />
                <RandomImage size={110} className="ring-1 ring-white" />
              </div>
            </section>
            <article class="vertical w-fit h-full gap-5 items-start justify-evenly">
              <h2> {product.title}</h2>
              <div class="overflow-auto leading-5">
                <p class="max-w-[60ch]">{product.description.long}</p>
              </div>
              {/* LIST */}
              <section class="vertical gap-3">
                <article class="horizontal items-center justify-start w-fit gap-5">
                  <div class="horizontal center gap-1">
                    <Gauge className="h-5 -translate-y-[2px] stroke-2" />
                    <p class="font-semibold">difficulté</p>
                  </div>
                  {product.stats.map((stat) => (
                    <Bar barSize={175} value={stat.value} />
                  ))}
                </article>
                <article class="horizontal items-center justify-start w-fit gap-5">
                  <div class="horizontal center gap-1">
                    <Backpack className="h-5 -translate-y-[2px] stroke-2" />
                    <p class="font-semibold">matériels</p>
                  </div>
                  <div class="space-x-5">
                    {[...Array(5)].map(() => (
                      <Badge variant="outline" className="my-2 font-medium" tag={generateLorem(1)} />
                    ))}
                  </div>
                </article>
                <article class="horizontal items-center justify-start w-fit gap-5">
                  <div class="horizontal center gap-1">
                    <MapPin className="h-5 stroke-2" />
                    <p class="font-semibold">lieux</p>
                  </div>
                  <div class="space-x-5">
                    {[...Array(5)].map(() => (
                      <Badge variant="outline" className="my-2 font-medium" tag={generateLorem(1)} />
                    ))}
                  </div>
                </article>
              </section>
              <Dialog product={product} dialogSize={1200} />
            </article>
          </div>
        );
      })
    }
  </Section>

  <HeaderFooter slot="footer" as="footer" />
</Layout>
